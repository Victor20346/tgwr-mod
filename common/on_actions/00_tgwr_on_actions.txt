on_actions = {

	on_peaceconference_ended = {
	#on_capitulation = {
		effect = {
			if = {
				limit = {
					original_tag = FRA #победитель
					FROM = { original_tag = GER } #проигравший
				}
				set_global_flag = great_war_ends
			}
			if = {
				limit = {
					original_tag = GER #победитель
					FROM = { original_tag = FRA } #проигравший
				}
				set_global_flag = great_war_ends
			}
			if = {
				limit = {
					original_tag = QIN #победитель
					FROM = { original_tag = CHI } #проигравший
				}
				QIN = {
					annex_country = {
						target = CHI
					}
					set_country_flag = xinhai_victory
					add_timed_idea = { idea = CHI_idea_xinhai_revolution_ends days = 720 }
					add_ideas = CHI_idea_inflation5
					add_ideas = CHI_idea_army_corruption3
				}
				news_event = { id = kis_news.119 }
				set_global_flag = xinhai_revolution_ends
				every_state = {
					limit = { is_core_of = CHI }
					remove_core_of = CHI
				}
			}
			if = {
				limit = {
					original_tag = CHI #победитель
					FROM = { original_tag = QIN } #проигравший
				}
				CHI = {
					annex_country = {
						target = QIN
					}
					add_timed_idea = { idea = CHI_idea_xinhai_revolution_ends days = 720 }
					set_country_flag = xinhai_victory
					add_ideas = CHI_idea_inflation5
					add_ideas = CHI_idea_army_corruption3
				}
				news_event = { id = kis_news.119 }
				set_global_flag = xinhai_revolution_ends
				every_state = {
					limit = { is_core_of = QIN }
					remove_core_of = QIN
				}
			}
			if = {
				limit = {
					original_tag = SOV #победитель
					FROM = { original_tag = RUS } #проигравший
				}
				SOV = {
					annex_country = {
						target = RUS
					}
					set_country_flag = russian_civil_war_winner
				}
				news_event = { id = rusrevolt.19 }
				set_global_flag = russian_civil_war_end
				every_state = {
					limit = { is_core_of = RUS }
					remove_core_of = RUS
				}
			}
			if = {
				limit = {
					original_tag = RUS #победитель
					FROM = { original_tag = SOV } #проигравший
				}
				RUS = {
					annex_country = {
						target = SOV
					}
					set_country_flag = russian_civil_war_winner
				}
				news_event = { id = rusrevolt.19 }
				set_global_flag = russian_civil_war_end
				every_state = {
					limit = { is_core_of = SOV NOT = { state = 240 } }
					RUS = { transfer_state = PREV }
					remove_core_of = SOV
				}
				if = {
					limit = {
						GER = { has_country_flag = germany_helped_white_russia }
					}
					if = {
						limit = {
							DKB = { exists = yes }
							KBN = { exists = yes }
						}
						DKB = {
							annex_country = {
								target = KBN
								transfer_troops = yes
							}
						}
					}
					DKB = {
						add_state_core = 218
						add_state_core = 232
						add_state_core = 233
						add_state_core = 234
						add_state_core = 235
						add_state_core = 236
						add_state_core = 237
						add_state_core = 238
						add_state_core = 245
						set_cosmetic_tag = DKB_KBN
					}
					release = DKB
					DKB = {
						give_resource_rights = { receiver = GER state = 232 }
						give_resource_rights = { receiver = GER state = 234 }
						set_capital = 234
					}
					GER = {
						if = {
							limit = {
								has_dlc = "Man the Guns"
							}
							set_autonomy = {
								target = DKB
								autonomous_state = autonomy_supervised_state
								freedom_level = 0.5
							}
							else = { puppet = DKB }
						}
						give_guarantee = DKB
					}
					UKR = {
						transfer_state = 137
					}
					if = {
						limit = {
							GEO = { exists = no }
						}
						every_state = {
							limit = {
								is_core_of = GEO
								is_owned_by = RUS
							}
							GEO = { transfer_state = PREV }
						}
					}
					end_puppet = GEO
					GEO = { leave_faction = yes }
					if = {
						limit = {
							ARM = { exists = no }
						}
						every_state = {
							limit = {
								is_core_of = ARM
								is_owned_by = RUS
							}
							ARM = { transfer_state = PREV }
						}
					}
					end_puppet = ARM
					ARM = { leave_faction = yes }
					if = {
						limit = {
							AZR = { exists = no }
						}
						every_state = {
							limit = {
								is_core_of = AZR
								is_owned_by = RUS
							}
							AZR = { transfer_state = PREV }
						}
					}
					end_puppet = AZR
					AZR = { leave_faction = yes }
				}
			}
			if = {
				limit = {
					original_tag = RUS #победитель
					FROM = { original_tag = TRM } #проигравший
				}
				RUS = {
					annex_country = {
						target = TRM
					}
				}
				every_state = {
					limit = { is_core_of = TRM }
					remove_core_of = TRM
				}
			}
			if = {
				limit = {
					original_tag = SOV #победитель
					FROM = { original_tag = DKB } #проигравший
				}
				SOV = {
					annex_country = {
						target = DKB
					}
				}
				every_state = {
					limit = { is_core_of = DKB }
					remove_core_of = DKB
				}
			}
			if = {
				limit = {
					original_tag = SOV #победитель
					FROM = { original_tag = KAZ } #проигравший
				}
				SOV = {
					annex_country = {
						target = KAZ
					}
				}
			}
			if = {
				limit = {
					original_tag = SOV #победитель
					FROM = { original_tag = TMS } #проигравший
				}
				SOV = {
					annex_country = {
						target = TMS
					}
				}
			}
			if = {
				limit = {
					tag = SAF
					FROM = { tag = ZIM }
				}
				SAF = {
					annex_country = {
						target = ZIM
					}
				}
			}
			# USB DEAD
			if = {
				limit = {
					original_tag = USA #победитель
					FROM = { original_tag = USB } #проигравший
				}
				USA = {
					annex_country = {
						target = USB
					}
					set_country_flag = USB_defeated
				}
				every_state = {
					limit = { is_core_of = USB }
					remove_core_of = USB
					add_core_of = USA
				}
			}
			if = {
				limit = {
					original_tag = CSA #победитель
					FROM = { original_tag = USB } #проигравший
				}
				CSA = {
					annex_country = {
						target = USB
					}
					set_country_flag = USB_defeated
				}
				every_state = {
					limit = { is_core_of = USB }
					remove_core_of = USB
					add_core_of = CSA
				}
			}
			# CSA DEAD
			if = {
				limit = {
					original_tag = USA #победитель
					FROM = { original_tag = CSA } #проигравший
				}
				USA = {
					annex_country = {
						target = CSA
					}
					set_country_flag = CSA_defeated
				}
				every_state = {
					limit = { is_core_of = CSA }
					remove_core_of = CSA
					add_core_of = USA
				}
			}
			if = {
				limit = {
					original_tag = USB #победитель
					FROM = { original_tag = CSA } #проигравший
				}
				USB = {
					annex_country = {
						target = CSA
					}
					set_country_flag = CSA_defeated
				}
				every_state = {
					limit = { is_core_of = CSA }
					remove_core_of = CSA
					add_core_of = USB
				}
			}
			# USA DEAD
			if = {
				limit = {
					original_tag = USB #победитель
					FROM = { original_tag = USA } #проигравший
				}
				USB = {
					annex_country = {
						target = USA
					}
					set_country_flag = USA_defeated
				}
				every_state = {
					limit = { is_core_of = USA }
					remove_core_of = USA
					add_core_of = USB
				}
			}
			if = {
				limit = {
					original_tag = CSA #победитель
					FROM = { original_tag = USA } #проигравший
				}
				CSA = {
					annex_country = {
						target = USA
					}
					set_country_flag = USA_defeated
				}
				every_state = {
					limit = { is_core_of = USA }
					remove_core_of = USA
					add_core_of = CSA
				}
			}
			if = {
				limit = {
					original_tag = GER #победитель
					FROM = { original_tag = AUH } #проигравший
				}
				GER = {
					annex_country = {
						target = AUH
					}
					set_country_flag = brothers_war_winner
				}
				set_global_flag = brothers_war_ends
				every_state = {
					limit = { is_core_of = AUH }
					remove_core_of = AUH
				}
				if = {
					limit = { GAL = { exists = no } }
					GAL = {
						transfer_state = 88
						transfer_state = 89
						transfer_state = 91
						if = {
							limit = { 
								NOT = { ROM = { owns_state = 80 } } 
							}
							transfer_state = 80
						}
						set_global_flag = galicia_released
						every_state = {
							limit = { is_owned_by = GAL }
							add_core_of = GAL
						}
					}
				}
				if = {
					limit = { CZE = { exists = no } }
					CZE = {
						transfer_state = 9
						transfer_state = 75
						transfer_state = 74
						transfer_state = 72
						load_oob = CZE_1918 
						set_global_flag = czechoslovakia_released
						every_state = {
							limit = { is_owned_by = CZE }
							add_core_of = CZE
						}
					}
				}
				if = {
					limit = { CRO = { exists = no } }
					CRO = {
						transfer_state = 103
						transfer_state = 104
						transfer_state = 109
						if = {
						    limit = {
								NOT = {
									163 = {is_claimed_by = ITA}
								}
							}
							transfer_state = 163
						}
						load_oob = CRO_1918 
						set_global_flag = croatia_released
						set_cosmetic_tag = CRO_SSCS
						every_state = {
							limit = { is_owned_by = CRO }
							add_core_of = CRO
						}
						create_country_leader = {
							name = "Anton Korošec"
							picture = "gfx/leaders/CRO/CRO_Anton_Korosec.dds"
							expire = "1935.1.1"
							ideology = centrism
							traits = { }
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = AUH
					FROM = { original_tag = GER }
				}
				every_state = {
					limit = {
						is_owned_by = GER
						NOT = { is_core_of = GER }
					}
					AUH = { transfer_state = PREV }
				}
				release = GER
				AUH = {
					puppet = GER
					set_country_flag = brothers_war_winner
				}
				GER = {
					load_oob = GER_1910
					if = {
						limit = {
							NOT = { has_dlc = "Man the Guns" }
						}

						load_oob = GER_1910_naval_legacy
					}
					
					if = {
						limit = {
							has_dlc = "Man the Guns"
						}

						load_oob = GER_1910_naval_mtg
					}
					set_cosmetic_tag = GER_confederation
					create_country_leader = {
						name = "Frankfurt Parliament"
						picture = "gfx/leaders/GER/GER_Frankfurt_Parliament.dds"
						expire = "1935.1.1"
						ideology = oligarchism
						traits = { }
					}
					set_capital = 55
					set_party_name = { 
						ideology = neutrality
						long_name = GER_frankfurt_parliament
						name = GER_frankfurt_parliament
					}
				}
				if = {
					limit = { has_dlc = "Together for Victory" }
					set_autonomy = {
						target = GER
						autonomous_state = autonomy_dominion
					}
				}
				if = {
					limit = {
						PNG = {
							exists = yes
							is_subject_of = AUH
						}
					}
					annex_country = {
						target = PNG
					}
				}
				annex_country = {
					target = NMB
				}
				create_faction = central_powers
				add_to_faction = PAP
				set_global_flag = brothers_war_ends
			}
			if = {
				limit = {
					original_tag = AUH
					FROM = { original_tag = HUN }
					AUH = { has_cosmetic_tag = AUH_EMP }
				}
				if = {
					limit = {
						has_government = neutrality
					}
					HUN = {
						set_party_name = {
							ideology = neutrality
							long_name = AUH_neutrality_party
							name = AUH_neutrality_party
						}
						add_ideas = AUH_ww1_House_Habsburg_Lorraine
					}
				}
				if = {
					limit = {
						has_country_leader = {
							name = "Franz Joseph I"
							ruling_only = yes
						}
					}
					HUN = {
						create_country_leader = {
							name = "I. Ferenc József"
							picture = "gfx/leaders/AUH/AUH_franz_joseph_i.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = { }
						}
					}
				}
				if = {
					limit = {
						has_country_leader = {
							name = "Franz Ferdinand I"
							ruling_only = yes
						}
					}
					HUN = {
						create_country_leader={
							name = "I. Ferenc Ferdinánd"
							picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = { }
						}
					}
				}
				if = {
					limit = {
						has_country_leader = {
							name = "Karl I"
							ruling_only = yes
						}
					}
					HUN = {
						create_country_leader={
							name = "IV. Károly"
							picture = "gfx/leaders/AUH/AUH_karl_i.dds"
							expire = "1935.1.1"
							ideology = autocracy
							traits = { }
						}
					}
				}
				release = HUN
				puppet = HUN
				if = {
					limit = { has_dlc = "Together for Victory" }
					set_autonomy = {
						target = HUN
						autonomous_state = autonomy_dominion
					}
				}
				HUN = {
					set_popularities = {
						fascism = 0
						communism = 0
						democratic = 0
						neutrality = 100
					}
					set_politics = {
						ruling_party = neutrality 
						last_election = "1919.1.1"
						election_frequency = 48 
						elections_allowed = no
					}
				}
				AUH = {
					add_ai_strategy = {
						type = protect
						id = "HUN"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "HUN"
						value = 200
					}
				}
			}
			if = {
				limit = {
					original_tag = AUH
					FROM = { original_tag = ITA }
				}
				AUH = {
					transfer_state = 159
					transfer_state = 160
				}
				SIC = {
					add_state_core = 115
					add_state_core = 117
					add_state_core = 156
				}
				TUS = {
					add_state_core = 162
				}
				EMI = {
					add_state_core = 833
				}
				PAP = {
					add_state_core = 2
					add_state_core = 157
					add_state_core = 161
					add_state_core = 835
				}
				SRD = {
					add_state_core = 114
					add_state_core = 158
					add_state_claim = 735
					add_state_claim = 834
				}
				release = SRD
				release = SIC
				ITA = {
					transfer_units_fraction= {
						target = SRD
						size = 0.5
						stockpile_ratio = 0.5
						army_ratio = 0.5
						navy_ratio = 0.5
						air_ratio = 0.5
					}
					transfer_units_fraction= {
						target = SIC
						size = 1
						stockpile_ratio = 1
						army_ratio = 1
						navy_ratio = 1
						air_ratio = 1
					}
				}
				release = TUS
				release = EMI
				release = PAP
				AUH = {
					puppet = TUS
					puppet = SRD
					puppet = SIC
					puppet = EMI
					puppet = PAP
				}
				if = {
					limit = {
						SOM = {
							exists = yes
							is_subject_of = AUH
						}
					}
					annex_country = {
						target = SOM
					}
				}
				every_state = {
					limit = {
						is_owned_by = ITA
						NOT = { is_core_of = ITA }
					}
					AUH = { transfer_state = PREV }
				}
				if = {
					limit = {
						ERI = {
							exists = yes
							is_subject_of = AUH
						}
					}
					annex_country = {
						target = ERI
					}
				}
				SRD = {
					transfer_state = 114
				}
				if = {
					limit = { has_dlc = "Together for Victory" }
					set_autonomy = {
						target = SRD
						autonomous_state = autonomy_dominion
					}
				}
				if = {
					limit = { has_dlc = "Together for Victory" }
					set_autonomy = {
						target = SIC
						autonomous_state = autonomy_dominion
					}
				}
				if = {
					limit = { has_dlc = "Together for Victory" }
					set_autonomy = {
						target = PAP
						autonomous_state = autonomy_tgwr_informal_protectorate
					}
				}
				AUH = {
					add_ai_strategy = {
						type = protect
						id = "SRD"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "SRD"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "TUS"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "TUS"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "VNC"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "VNC"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "EMI"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "EMI"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "SIC"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "SIC"
						value = 200
					}
					add_ai_strategy = {
						type = protect
						id = "PAP"
						value = 200
					}
					add_ai_strategy = {
						type = consider_weak
						id = "PAP"
						value = 200
					}
				}
			}
			if = {
				limit = {
					original_tag = NFA
					FROM = { original_tag = FRC }
				}
				NFA = {
					annex_country = {
						target = FRC
					}
				}
				every_state = {
					limit = {
						is_core_of = FRA
						NOT = {
							state = 1
							state = 17
							state = 28
							state = 29
							state = 706
							state = 713
							state = 730
							state = 735
							state = 834
						}
					}
					NFA = { transfer_state = PREV }
				}
				every_state = {
					limit = { is_core_of = FRA }
					remove_core_of = FRA
				}
				if = {
					limit = {
						GER = { has_country_flag = germany_helped_nationalist_france }
					}
					if = {
						limit = {
							GER = { NOT = { owns_state = 17 } }
						}
						GER = { transfer_state = 17 }
					}

					GER = { country_event = ww1_germany.75 }
				}
			}
			if = {
				limit = {
					original_tag = GER
					FROM = { original_tag = FRA }
					has_global_flag = interbellum
				}

				GER = {
					annex_country = {
						target = FRA
					}
				}

				create_dynamic_country = {
					original_tag = FRA

					set_politics = {
						ruling_party = neutrality
						last_election = "1918.11.11"
						election_frequency = 60 
						elections_allowed = no
					}

					set_popularities = {
						democratic = 0
						neutrality = 100
						fascism = 0
						communism = 0
					}

					set_capital = 16

					set_country_flag = FRA_puppet_france_flag
					set_cosmetic_tag = FRP
				}

				every_state = {
					limit = {
						is_core_of = FRA
						NOT = {
							state = 1
							state = 17
							state = 28
							state = 29
							state = 706
							state = 713
							state = 730
							state = 735
							state = 834
						}
					}
					FRP = {
						add_state_core = PREV
						transfer_state = PREV
					}
				}

				if = {
					limit = {
						GER = {
							owns_state = 735
							owns_state = 834
						}
					}
					FRP = {
						add_state_core = 735
						add_state_core = 834
						transfer_state = 735
						transfer_state = 834
					}
				}

				if = {
					limit = {
						GER = {
							owns_state = 1
						}
					}
					FRP = {
						add_state_core = 1
						transfer_state = 1
					}
				}

				FRP = {
					create_country_leader = {
						name = "Gouvernement Provisoire"
						picture = "gfx/leaders/FRA/FRA_provisional_government.dds"
						expire = "1935.1.1"
						ideology = conservatism
						traits = {}
					}

					create_country_leader = {
						name = "Victoria"
						desc = "POLITICS_VICTORIA_DESC"
						picture = GFX_portrait_ger_victoria_louise
						expire = "1935.1.1"
						ideology = autocracy
						female = yes
						traits = {
							kaiserin_of_the_people
							victoria_iii
						}
					}

					set_party_name = { 
						ideology = neutrality
						long_name = GER_neutrality_party
						name = GER_neutrality_party
					}

					 set_party_name = { 
						ideology = fascism 
						long_name = NFA_fascism_party_long
						name = NFA_fascism_party
					}
				}

				GER = {
					puppet = FRP
				}
			}
		}
	}
	#ROOT is winner #FROM gets annexed
	on_annex = {
		effect = {
			if = {
				limit = {
					ROOT = { tag = SOV }
					FROM = { tag = RUS }
				}
				SOV = {
					annex_country = {
						target = DKB
						transfer_troops = no
					}
					annex_country = {
						target = SIB
						transfer_troops = no
					}
				}
			}
			if = {
				limit = {
					ROOT = { tag = RUS }
					FROM = { tag = SOV }
				}
				RUS = {
					annex_country = {
						target = TRM
						transfer_troops = no
					}
				}
			}
			every_country = {
				limit = {
					OR = {
						original_tag = RAJ
						original_tag = MAL
						original_tag = INS
						original_tag = VIN
					}
					is_puppet = no
				}
				abandon_colony_tag = yes
			}
			if = {
				limit = {
					original_tag = CAN
					NOT = { has_country_flag = canada_is_britain }
					is_puppet = no
				}
				abandon_colony_tag = yes
			}
			if = {
				limit = {
					ROOT = { tag = ROI }
					FROM = { tag = ITS }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = ITS 
							is_claimed_by = ITS
						}
					}
					remove_core_of = ITS
					remove_claim_by = ITS
				}
			}
			if = {
				limit = {
					ROOT = { tag = ROI }
					FROM = { tag = SRI }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = SRI 
							is_claimed_by = SRI
						}
					}
					remove_core_of = SRI
					remove_claim_by = SRI
				}
			}
			if = {
				limit = {
					ROOT = { tag = SRI }
					FROM = { tag = ROI }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = ROI 
							is_claimed_by = ROI
						}
					}
					remove_core_of = ROI
					remove_claim_by = ROI
				}
			}
			if = {
				limit = {
					ROOT = { tag = SRI }
					FROM = { tag = ITS }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = ITS 
							is_claimed_by = ITS
						}
					}
					remove_core_of = ITS
					remove_claim_by = ITS
				}
			}
			if = {
				limit = {
					ROOT = { tag = ITS }
					FROM = { tag = ROI }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = ROI 
							is_claimed_by = ROI
						}
					}
					remove_core_of = ROI
					remove_claim_by = ROI
				}
			}
			if = {
				limit = {
					ROOT = { tag = ITS }
					FROM = { tag = SRI }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = SRI 
							is_claimed_by = SRI
						}
					}
					remove_core_of = SRI
					remove_claim_by = SRI
				}
			}
			if = {
				limit = {
					ROOT = { tag = FRC }
					FROM = { tag = NFA }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = NFA 
							is_claimed_by = NFA
						}
					}
					remove_core_of = NFA
					remove_claim_by = NFA
				}
			}
			if = {
				limit = {
					ROOT = { tag = NFA }
					FROM = { tag = FRC }
				}
				every_state = {
					limit = { 
					    OR = {
							is_core_of = FRC 
							is_claimed_by = FRC
						}
					}
					remove_core_of = FRC
					remove_claim_by = FRC
				}
			}
			if = {
				limit = {
					FROM = { has_country_flag = protectorate }
				}
				FROM = { clr_country_flag = protectorate }
			}
		}
	}
	on_new_term_election = {
		effect = {
			### Brazil ###
			if = {
				limit = { original_tag = BRA }
				country_event = ww1_brazil.1
				country_event = ww1_brazil.2
				country_event = ww1_brazil.3
				country_event = ww1_brazil.5
			}
			### Ecuador ###
			if = {
				limit = { original_tag = ECU }
				country_event = ww1_ecuador.5
				country_event = ww1_ecuador.6
			}
			### Argentina ###
			if = {
				limit = { original_tag = ARG }
				country_event = ww1_argentina.1
				country_event = ww1_argentina.3
			}
		}
# USA EVENTS	
		
		random_events = {
		}
	}
	on_subject_free = {
		effect = {
			#make sure Dominions lose the dominion tag
			if = {
				limit = {
					OR = {
						original_tag = RAJ
						original_tag = MAL
						original_tag = INS
						original_tag = VIN
						original_tag = MEX
						original_tag = USA
						original_tag = UKR
						original_tag = CHI
						original_tag = QIN
						original_tag = ENG
						original_tag = TUR
					}
				}
				abandon_colony_tag = yes
			}

			if = {
				limit = {
					TAG = INS
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					TAG = MAL
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					TAG = RAJ
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					TAG = VIN
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					original_tag = CMR
					has_country_leader = { name = "Paul von Lettow-Vorbeck" }
				}
				retire_country_leader = yes
			}
			if = {
				limit = {
					original_tag = CAN
					NOT = { has_country_flag = canada_is_britain }
				}
				abandon_colony_tag = yes
			}
			if = {
				limit = {
					OR = {
						original_tag = MEX
						original_tag = ENG
						original_tag = RUS
						original_tag = USA
						original_tag = CHI
						original_tag = QIN
						original_tag = MON
						original_tag = MEN
						original_tag = MAN
						original_tag = TRM
						original_tag = TAN
						original_tag = JAP
					}
					is_subject = no
				}
				abandon_puppet_tag = yes
			}
			if = {
				limit = {
					ROOT = { has_country_flag = protectorate }
				}
				clr_country_flag = protectorate
			}
		}
	}
	on_release_as_free = {
		effect = {
			if = {
				limit = {
					OR = {
						original_tag = RAJ
						original_tag = MAL
						original_tag = INS
						original_tag = VIN
					}
				}
				abandon_colony_tag = yes
			}
			if = {
				limit = {
					original_tag = CAN
					NOT = { has_country_flag = canada_is_britain }
				}
				abandon_colony_tag = yes
			}
			if = {
				limit = {
					OR = {
						original_tag = MEX
						original_tag = ENG
						original_tag = RUS
						original_tag = USA
						original_tag = CHI
						original_tag = QIN
						original_tag = MON
						original_tag = MEN
						original_tag = MAN
						original_tag = TRM
						original_tag = TAN
						original_tag = JAP
					}
					is_subject = no
				}
				abandon_puppet_tag = yes
			}
			if = {
				limit = {
					ROOT = { has_country_flag = protectorate }
				}
				ROOT = { clr_country_flag = protectorate }
			}
		}
	}
	#*evil laugh*
	on_puppet = {
		effect = {
			if = {
				limit = {
					original_tag = CAN
					is_subject_of = ENG
				}
				set_cosmetic_tag = CAN_UK
			}
			if = {
				limit = {
					original_tag = CMR
					has_government = neutrality
					NOT = { has_country_leader = { name = "Paul von Lettow-Vorbeck" ruling_only = yes } }
					FROM = { tag = GER }
					GER = { has_government = neutrality }
				}
				CMR = { 
					create_country_leader = {
						name = "Paul von Lettow-Vorbeck"
						picture = "gfx/leaders/GER/GER_paul_lettow_vorbeck.dds"
						expire = "1935.1.1"
						ideology = despotism
						traits = {
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = USA
					FROM = { tag = SER }
				}
				USA = {
					create_country_leader = {
						name = "Nikola Tesla"
						picture = "gfx/leaders/SER/SER_tesla.dds"
						expire = "1935.1.1"
						ideology = liberalism
						traits = { tgwr_inventive_genius }
					}
					create_country_leader = {
						name = "Nikola Tesla"
						picture = "gfx/leaders/SER/SER_tesla.dds"
						expire = "1935.1.1"
						ideology = moderatism
						traits = { tgwr_inventive_genius }
					}
				}
			}
			if = {
				limit = {
					original_tag = CAN
					FROM = { tag = USA }
				}
				set_cosmetic_tag = CAN_USA
			}
			if = {
				limit = {
					original_tag = MEX
					FROM = { tag = USA }
				}
				set_cosmetic_tag = MEX_USA
			}
			if = {
				limit = {
					original_tag = ENG
					FROM = { tag = USA }
				}
				set_cosmetic_tag = ENG_USA
			}
			if = {
				limit = {
					original_tag = MEX
					FROM = { tag = ENG }
				}
				set_cosmetic_tag = MEX_ENG
			}
			if = {
				limit = { 
					original_tag = USA
					FROM = { tag = ENG }
				}
				set_cosmetic_tag = USA_UK #vanilla hoi4
			}
			if = {
				limit = {
					original_tag = USA
					FROM = { tag = GER }
				}
				USA = { 
					set_cosmetic_tag = USA_GER
					create_country_leader = {
						name = "Charles John Hexamerk"
						picture = "gfx/leaders/USA/USA_Charles_John_Hexamer.dds"
						expire = "1935.1.1"
						ideology = oligarchism
						traits = { }
					}
				}
			}
			if = {
				limit = { 
					original_tag = USA
					FROM = { tag = RUS }
				}
				set_cosmetic_tag = USA_RUS #историческая справедливость
			}
			if = {
				limit = { 
					original_tag = POL
					FROM = { tag = RUS }
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = POL_RUS
			}
			if = {
				limit = { 
					original_tag = UKR
					FROM = { tag = RUS }
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = UKR_RUS
			}
			if = {
				limit = { 
					original_tag = KAZ
					FROM = { tag = RUS }
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = KAZ_RUS
			}
			if = {
				limit = { 
					original_tag = TMS
					FROM = { tag = RUS }
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = TMS_RUS
			}
			
			
			#China/Qing
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					FROM = { tag = GER }
				}
				set_cosmetic_tag = CHI_GER
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					FROM = { tag = ENG }
				}
				set_cosmetic_tag = CHI_ENG
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					FROM = { tag = RUS }
				}
				set_cosmetic_tag = CHI_RUS
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = CHI_ming
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = CHI_KOR
			}
			#Turks
			if = {
				limit = {
					original_tag = TUR
					FROM = { tag = RUS }
				}
				set_cosmetic_tag = TUR_RUS
			}
			#Persia
			if = {
				limit = {
					original_tag = PER
					FROM = { tag = RUS }
				}
				set_cosmetic_tag = PER_RUS
			}
			if = {
				limit = {
					original_tag = PER
					FROM = { tag = ENG }
				}
				set_cosmetic_tag = PER_ENG
			}
			#Japan
			if = {
				limit = {
					original_tag = JAP
					NOT = { KOR = { has_cosmetic_tag = KOR_social } }
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = JAP_KOR_original
			}
			if = {
				limit = {
					original_tag = JAP
					KOR = { has_cosmetic_tag = KOR_social }
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = JAP_KOR_social
			}
			if = {
				limit = {
					original_tag = JAP
					NOT = { KOR = { has_cosmetic_tag = KOR_social } }
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = JAP_KOR_joseon
			}
			#Manchuria
			if = {
				limit = {
					original_tag = MAN
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = MAN_jurchen
			}
			#Transamur
			if = {
				limit = {
					original_tag = TRM
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = TRM_jurchen
			}
			if = {
				limit = {
					original_tag = TRM
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = TRM_KOR
			}
			#Mengjiang
			if = {
				limit = {
					original_tag = MEN
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = MEN_korchin
			}
			#Mongol
			if = {
				limit = {
					original_tag = MON
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = MON_mongolia
			}
			#Vietnam
			if = {
				limit = {
					original_tag = VIN
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = VIN_KOR
			}
			#Tannu Tuva
			if = {
				limit = {
					original_tag = TAN
					KOR = { has_cosmetic_tag = KOR_joseon }
					FROM = { tag = KOR }
				}
				set_cosmetic_tag = TAN_oirat
			}
			if = {
				limit = {
					tag = ROI 
					FROM = { tag = ITS }
				}
				ITS = {
					annex_country = {
						target = ROI
					}
				}
			}
			if = {
				limit = {
					tag = ROI 
					FROM = { tag = SRI }
				}
				SRI = {
					annex_country = {
						target = ROI
					}
				}
			}
			if = {
				limit = {
					tag = SRI 
					FROM = { tag = ROI }
				}
				ROI = {
					annex_country = {
						target = SRI
					}
				}
			}
			if = {
				limit = {
					tag = SRI 
					FROM = { tag = ITS }
				}
				ITS = {
					annex_country = {
						target = SRI
					}
				}
			}
			if = {
				limit = {
					tag = ITS 
					FROM = { tag = ROI }
				}
				ROI = {
					annex_country = {
						target = ITS
					}
				}
			}
			if = {
				limit = {
					tag = ITS 
					FROM = { tag = SRI }
				}
				SRI = {
					annex_country = {
						target = ITS
					}
				}
			}
			if = {
				limit = {
					tag = FRC 
					FROM = { tag = NFA }
				}
				NFA = {
					annex_country = {
						target = FRA
					}
				}
			}
			if = {
				limit = {
					tag = NFA 
					FROM = { tag = FRC }
				}
				FRC = {
					annex_country = {
						target = NFA
					}
				}
			}
			if = {
				limit = {
					tag = FNG
					MAN = { is_subject_of = KOR }
					FROM = { tag = KOR }
				}
				MAN = {
					annex_country = {
						target = FNG
						transfer_troops = yes
					}
				}
			}
			if = {
				limit = {
					tag = BLR
					FROM = { tag = AUH }
				}
				BLR = {
					set_cosmetic_tag = BLR_GER
				}
			}
			if = {
				limit = {
					ROOT = { has_country_flag = protectorate }
				}
				ROOT = {
				    clr_country_flag = protectorate 
				}
			}
			if = {
				limit = {
					original_tag = QBC
					is_subject_of = FRA
					FRA = { has_cosmetic_tag = FRA_THIRD_EMPIRE }
					has_government = neutrality
				}
				set_cosmetic_tag = QBC_FRA_EMPIRE
			}
			if = {
				limit = {
					original_tag = QBC
					is_subject_of = FRA
					NOT = { FRA = { has_cosmetic_tag = FRA_THIRD_EMPIRE } }
					has_government = neutrality
				}
				set_cosmetic_tag = QBC_FRA_KINGDOM
			}
			if = {
				limit = { 
					original_tag = USA
					FROM = { tag = FRA }
				}
				set_cosmetic_tag = USA_FRA
			}
			if = {
				limit = {
					original_tag = VNC
					is_subject_of = AUH
				}
				set_cosmetic_tag = VNC_AUH

				if = {
					limit = {
						NOT = { has_global_flag = emperor_franz_dead }
					}
					create_country_leader = {
						name = "Franz Joseph I"
						picture = "gfx/leaders/AUH/AUH_franz_joseph_i.dds"
						expire = "1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}

				if = {
					limit = {
						has_global_flag = emperor_franz_dead
						NOT = { has_global_flag = franz_ferdinand_ruler }
					}
					create_country_leader = {
						name = "Karl I"
						picture="gfx/leaders/AUH/AUH_karl_i.dds"
						expire="1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}

				if = {
					limit = {
						has_global_flag = emperor_franz_dead
						has_global_flag = franz_ferdinand_ruler
					}
					create_country_leader = {
						name = "Franz Ferdinand I"
						picture="gfx/leaders/AUH/AUH_franz_ferdinand.dds"
						expire="1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}
			}
		}
	}
	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					original_tag = CMR
					has_government = neutrality
					NOT = { has_country_leader = { name = "Paul von Lettow-Vorbeck" ruling_only = yes } }
					is_puppet_of = GER
					GER = { has_government = neutrality }
				}
				CMR = { 
					create_country_leader = {
						name = "Paul von Lettow-Vorbeck"
						picture = "gfx/leaders/GER/GER_paul_lettow_vorbeck.dds"
						expire = "1935.1.1"
						ideology = despotism
						traits = {
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = CAN
					is_subject_of = USA
				}
				set_cosmetic_tag = CAN_USA
			}
			if = {
				limit = {
					original_tag = ENG
					FROM = { tag = USA }
				}
				set_cosmetic_tag = ENG_USA
			}
			if = {
				limit = {
					original_tag = MEX
					is_subject_of = USA
				}
				set_cosmetic_tag = MEX_USA
			}
			if = {
				limit = {
					original_tag = MEX
					is_subject_of = ENG
				}
				set_cosmetic_tag = MEX_ENG
			}
			if = {
				limit = { 
					original_tag = USA
					is_subject_of = ENG
				}
				set_cosmetic_tag = USA_UK #vanilla hoi4
			}
			if = {
				limit = {
					original_tag = USA
					FROM = { tag = GER }
				}
				USA = { 
					set_cosmetic_tag = USA_GER
					create_country_leader = {
						name = "Charles John Hexamerk"
						picture = "gfx/leaders/USA/USA_Charles_John_Hexamer.dds"
						expire = "1935.1.1"
						ideology = oligarchism
						traits = { }
					}
				}
			}
			if = {
				limit = { 
					original_tag = USA
					is_subject_of = RUS
				}
				set_cosmetic_tag = USA_RUS #историческая справедливость
			}
			if = {
				limit = { 
					original_tag = POL
					is_subject_of = RUS
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = POL_RUS
			}
			if = {
				limit = { 
					original_tag = UKR
					is_subject_of = RUS
					RUS = { NOT = { has_completed_focus = RUS_self_determination_of_nations } }
				}
				set_cosmetic_tag = UKR_RUS
			}
			#China/Qing
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					is_subject_of = GER
				}
				set_cosmetic_tag = CHI_GER
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					is_subject_of = ENG
				}
				set_cosmetic_tag = CHI_ENG
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					is_subject_of = RUS
				}
				set_cosmetic_tag = CHI_RUS
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = CHI_ming
			}
			if = {
				limit = {
					OR = {
						original_tag = CHI
						original_tag = QIN
					}
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					is_subject_of = KOR
				}
				set_cosmetic_tag = CHI_KOR
			}
			#Turks
			if = {
				limit = {
					original_tag = TUR
					is_subject_of = RUS
				}
				set_cosmetic_tag = TUR_RUS
			}
			#Persia
			if = {
				limit = {
					original_tag = PER
					is_subject_of = RUS
				}
				set_cosmetic_tag = PER_RUS
			}
			if = {
				limit = {
					original_tag = PER
					is_subject_of = ENG
				}
				set_cosmetic_tag = PER_ENG
			}
			#Japan
			if = {
				limit = {
					original_tag = JAP
					NOT = { KOR = { has_cosmetic_tag = KOR_social } }
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					is_subject_of = KOR
				}
				set_cosmetic_tag = JAP_KOR_original
			}
			if = {
				limit = {
					original_tag = JAP
					KOR = { has_cosmetic_tag = KOR_social }
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					is_subject_of = KOR
				}
				set_cosmetic_tag = JAP_KOR_social
			}
			if = {
				limit = {
					original_tag = JAP
					NOT = { KOR = { has_cosmetic_tag = KOR_social } }
					KOR = { has_cosmetic_tag = KOR_joseon } 
					is_subject_of = KOR
				}
				set_cosmetic_tag = JAP_KOR_joseon
			}
			#Manchuria
			if = {
				limit = {
					original_tag = MAN
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = MAN_jurchen
			}
			#Transamur
			if = {
				limit = {
					original_tag = TRM
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = TRM_jurchen
			}
			if = {
				limit = {
					original_tag = TRM
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					is_subject_of = KOR
				}
				set_cosmetic_tag = TRM_KOR
			}
			#Mengjiang
			if = {
				limit = {
					original_tag = MEN
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = MEN_korchin
			}
			#Mongol
			if = {
				limit = {
					original_tag = MON
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = MON_mongolia
			}
			#Vietnam
			if = {
				limit = {
					original_tag = VIN
					NOT = { KOR = { has_cosmetic_tag = KOR_joseon } }
					is_subject_of = KOR
				}
				set_cosmetic_tag = VIN_KOR
			}
			#Tannu Tuva
			if = {
				limit = {
					original_tag = TAN
					KOR = { has_cosmetic_tag = KOR_joseon }
					is_subject_of = KOR
				}
				set_cosmetic_tag = TAN_oirat
			}
			if = {
				limit = {
					ROOT = { has_country_flag = protectorate }
				}
				ROOT = {
				    clr_country_flag = protectorate 
				}
			}
			if = {
				limit = {
					original_tag = QBC
					is_subject_of = FRA
					FRA = { has_cosmetic_tag = FRA_THIRD_EMPIRE }
					has_government = neutrality
				}
				set_cosmetic_tag = QBC_FRA_EMPIRE
			}
			if = {
				limit = {
					original_tag = QBC
					is_subject_of = FRA
					NOT = { FRA = { has_cosmetic_tag = FRA_THIRD_EMPIRE } }
					has_government = neutrality
				}
				set_cosmetic_tag = QBC_FRA_KINGDOM
			}
			if = {
				limit = { 
					original_tag = USA
					is_subject_of = FRA
				}
				set_cosmetic_tag = USA_FRA
			}
			if = {
				limit = {
					original_tag = VNC
					is_subject_of = AUH
				}
				set_cosmetic_tag = VNC_AUH

				if = {
					limit = {
						NOT = { has_global_flag = emperor_franz_dead }
					}
					create_country_leader = {
						name = "Franz Joseph I"
						picture = "gfx/leaders/AUH/AUH_franz_joseph_i.dds"
						expire = "1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}

				if = {
					limit = {
						has_global_flag = emperor_franz_dead
						NOT = { has_global_flag = franz_ferdinand_ruler }
					}
					create_country_leader = {
						name = "Karl I"
						picture="gfx/leaders/AUH/AUH_karl_i.dds"
						expire="1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}

				if = {
					limit = {
						has_global_flag = emperor_franz_dead
						has_global_flag = franz_ferdinand_ruler
					}
					create_country_leader = {
						name = "Franz Ferdinand I"
						picture="gfx/leaders/AUH/AUH_franz_ferdinand.dds"
						expire="1935.1.1"
						ideology = autocracy
						traits = { }
					}
				}
			}
		}
	}
	on_startup = {
		effect = {
			AUH = {
				if = {
					limit = {
						has_game_rule = {
							rule = AUH_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    50 = { AUH = { set_country_flag = AUH_AI_HISTORICAL } }
						40 = { AUH = { set_country_flag = AUH_AI_RANDOM_FEDERALISM } }
					}	
				}
			}
			BRA = {
				if = {
					limit = {
						has_game_rule = {
							rule = BRA_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						30 = { BRA = { set_country_flag = BRA_AI_RANDOM_DEMOCRATIC_HISTORICAL } }
						17 = { BRA = { set_country_flag = BRA_AI_RANDOM_DEMOCRATIC_ALTERNATE } }
						33 = { BRA = { set_country_flag = BRA_AI_RANDOM_JUNTA } }
						33 = { BRA = { set_country_flag = BRA_AI_RANDOM_NEUTRALITY_MONARCHIST } }
					}
				}
			}
			ENG = {
				if = {
					limit = {
						has_game_rule = {
							rule = ENG_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
						40 = { ENG = { set_country_flag = ENG_AI_DEMOCRATIC_HISTORICAL } }
						20 = { ENG = { set_country_flag = ENG_AI_RANDOM_COMMUNIST } }
						30 = { ENG = { set_country_flag = ENG_AI_RANDOM_NEUTRALITY } }
						20 = { ENG = { set_country_flag = ENG_AI_RANDOM_FASCIST } }
						15 = {
							random_list = {
								50 = { set_country_flag = ENG_AI_RANDOM_EDWARD }
								30 = { set_country_flag = ENG_AI_RANDOM_VICTORIA }
								15 = { set_country_flag = ENG_AI_RANDOM_AUWI }
							}
						}
					}
				}
			}
			BUL = {
				if = {
					limit = {
						has_game_rule = {
							rule = BUL_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    40 = { BUL = { set_country_flag = BUL_AI_RANDOM_HISTORICAL } }
						20 = { BUL = { set_country_flag = BUL_AI_RANDOM_BORIS_III } }
						30 = { BUL = { set_country_flag = BUL_AI_RANDOM_LIBERALIST } }
						35 = {
							random_list = {
								50 = { set_country_flag = BUL_AI_RANDOM_AGRARIANIST }
								30 = { set_country_flag = BUL_AI_RANDOM_SOCILAIST }
								30 = { set_country_flag = BUL_AI_RANDOM_FASCIST }
							}
						}
					}	
				}
			}
			BUL = {
				if = {
					limit = {
						has_game_rule = {
							rule = BUL_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    40 = { BUL = { set_country_flag = BUL_AI_RANDOM_HISTORICAL } }
						20 = { BUL = { set_country_flag = BUL_AI_RANDOM_BORIS_III } }
						30 = { BUL = { set_country_flag = BUL_AI_RANDOM_LIBERALIST } }
						35 = {
							random_list = {
								50 = { set_country_flag = BUL_AI_RANDOM_AGRARIANIST }
								30 = { set_country_flag = BUL_AI_RANDOM_SOCILAIST }
								30 = { set_country_flag = BUL_AI_RANDOM_FASCIST }
							}
						}
					}	
				}
			}
			GER = {
				if = {
					limit = {
						has_game_rule = {
							rule = GER_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    40 = { GER = { set_country_flag = GER_AI_RANDOM_HISTORICAL } }
						30 = { GER = { set_country_flag = GER_AI_RANDOM_DEMOCRATIC } }
						30 = { GER = { set_country_flag = GER_AI_RANDOM_BACKSTAB } }
					}	
				}
			}
			HOL = {
				if = {
					limit = {
						has_game_rule = {
							rule = HOL_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    40 = { HOL = { set_country_flag = HOL_AI_RANDOM_HISTORICAL } }
						20 = { HOL = { set_country_flag = HOL_AI_RANDOM_DEMOCRATIC_ALTERNATE } }
						25 = { HOL = { set_country_flag = HOL_AI_RANDOM_SYNDICALIST } }
						35 = { HOL = { set_country_flag = HOL_AI_RANDOM_NEUTRALITY } }
					}	
				}
			}
			RUS = {
				if = {
					limit = {
						has_game_rule = {
							rule = RUS_ai_behavior
							option = RANDOM
						}
					}
					random_list = {
					    40 = { RUS = { set_country_flag = RUS_AI_RANDOM_HISTORICAL } }
						20 = { RUS = { set_country_flag = RUS_AI_RANDOM_KAISER } }
						30 = { RUS = { set_country_flag = RUS_AI_RANDOM_TSAR } }
						30 = { RUS = { set_country_flag = RUS_AI_RANDOM_DEMOCRATIC } }
						10 = { RUS = { set_country_flag = RUS_AI_RANDOM_COMMUNIST } }
					}	
				}
			}
			
			
			
			EGY = {
				country_lock_all_division_template = yes
			}
			#use this as a template for all developer notes events
			CAN = {
				if = {
					limit = {
						is_ai = no
					}
					CAN = { country_event = { id = canada.1 } }
				}
			}
			ENG = {
				if = {
					limit = {
						is_ai = no
					}
					ENG = { country_event = { id = ww1_developer_note.1 } }
				}
			}
			TUR = {
				if = {
					limit = {
						is_ai = no
					}
					TUR = { country_event = { id = ww1_developer_note.2 } }
				}
			}
			#Effect to create 'territories' in Utah
			376 = { remove_core_of = MEX }
			377 = { remove_core_of = MEX }
			if = {
				limit = {
					has_game_rule = {
						rule = ita_fragmentation_status
						option = ITA_FRAGMENTED
					}
				}
				2 = { add_core_of = PAP }
				835 = { add_core_of = PAP }
				161 = { add_core_of = PAP }
				833 = { add_core_of = EMI }
				158 = { add_core_of = SRD }
				834 = { add_core_of = SRD }
				735 = { add_core_of = SRD }
				159 = { add_core_of = VNC }
				160 = { add_core_of = VNC }
				ITA = {
					release = SIC
					release = TUS
					release = VNC
					release = PAP
					release = EMI
					release = ERI
					release = SOM
					release = LBA
				}	
				SRD = {
				    set_politics = {
				   		ruling_party = neutrality
				   		elections_allowed = no
				    }
					add_popularity = {
    					ideology = neutrality
    					popularity = 0.15
					}
					set_cosmetic_tag = SRD_PIE
					add_ideas = ITA_ww1_Risorgimento
					annex_country = {
						target = ITA
						transfer_troops = yes
					}
					set_capital = 158
					delete_units = {
				        division_template = "Divisione Coloniale"
				        disband = no
				    }
					transfer_units_fraction= {
						target = SIC
						size = 0.35
				    }
					transfer_units_fraction= {
						target = TUS
						size = 0.13
				    }
					transfer_units_fraction= {
						target = SRD
						size = 0.15
				    }
					transfer_units_fraction= {
						target = EMI
						size = 0.05
				    }
					transfer_units_fraction= {
						target = VNC
						size = 0.2
				    }
					transfer_units_fraction= {
						target = PAP
						size = 0.28
				    }
					change_tag_from = ITA
					every_state = {
						teleport_armies = {
							to_state_array = owned_controlled_states
						}
					}
				}
				AUH = {
				    puppet = VNC 
					give_guarantee = PAP
				}
				VNC = {
				    set_cosmetic_tag = VNC_AUH	
				}	
				every_state = {
					limit = {
						OR = {
						    is_core_of = ITA
						    is_claimed_by = ITA
						}
					}
               	 	remove_core_of = ITA
					remove_claim_by = ITA
            	}
			}
			if = {
				limit = {
					has_game_rule = {
						rule = ita_fragmentation_status
						option = ITA_KR
					}
				}
				2 = { add_core_of = PAP }
				ITA = {
					release = SIC
					release = PAP
					release = SRD
					release = SOM
					release = LBA
					set_capital = 159
					delete_units = {
				        division_template = "Divisione Coloniale"
				        disband = no
				    }
				    set_politics = {
					    ruling_party = democratic
						elections_allowed = yes
				    }
				    set_country_flag = ITA_republican_italy_flag
				    set_cosmetic_tag = ROI
					set_popularities = {
				        democratic = 56
				        neutrality = 25
				        fascism = 9
				        communism = 10
			    	}
			        set_party_name = {
				        ideology = neutrality
				        long_name = ITA_neutrality_monarchist_party_long
				        name = ITA_neutrality_monarchist_party
			        }
					retire_ideology_leader = neutrality
					remove_ideas = ITA_ww1_Risorgimento
					remove_ideas = idea_italy_triple_alliance
					load_focus_tree = generic_focus
			    }
				SRD = {
				    set_politics = {
				   		ruling_party = neutrality
				   		elections_allowed = no
				    }
					add_popularity = {
    					ideology = neutrality
    					popularity = 0.15
					}
				}
				SIC = {
					give_guarantee = PAP
					give_military_access = PAP
				}	
				PAP = {
					give_guarantee = SIC
					give_military_access = SIC
				}	
				create_dynamic_country = {
					original_tag = ITA
					set_capital = 159
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 17
						neutrality = 0
						fascism = 4
						communism = 79
					}
					set_country_flag = ITA_socialist_italy_flag
					set_cosmetic_tag = ITA_communism
					create_country_leader = { 
						name = "Giacinto Menotti Serrati"
						picture = "gfx/leaders/ITA/ITA_giacinto_menotti_serrati.dds" 
						expire="1935.1.1" 
						ideology = marxism 
						traits = { } 
					}
					set_party_name = {
						ideology = democratic
						long_name = ITA_democratic_reformist_party_long
						name = ITA_democratic_reformist_party
					}		
					create_corps_commander = {
						name = "Randolfo Pacciardi"
						portrait_path = "gfx/leaders/ITA/ITA_randolfo_pacciardi.dds"
						traits = {
							politically_connected
							trickster
							guerilla_fighter
						}
						skill = 3
						attack_skill = 2
						defense_skill = 3
						planning_skill = 2
						logistics_skill = 3
					}
					create_corps_commander = {
						name = "Edmondo Rossoni"
						portrait_path = "gfx/leaders/ITA/ITA_edmondo_rossoni.dds"
						traits = {
							career_officer
							organizer
						}
						skill = 2
						attack_skill = 2
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 3
					}
					create_corps_commander = {
						name = "Arnaldo Azzi" 
						portrait_path = "gfx/leaders/ITA/ITA_arnaldo_azzi.dds" 
						traits = { } 
						skill = 1
						attack_skill = 1
						defense_skill = 1
						planning_skill = 1
						logistics_skill = 1
					}
                	reserve_dynamic_country = yes
                	load_focus_tree = generic_focus					
				}
				every_state = {
					limit = {
						OR = {
							state = 158
							state = 161
							state = 162
							state = 833
							state = 39
							state = 834
							state = 735
							state = 835
						}
						is_owned_by = ROI
						is_controlled_by = ROI
					}
					SRI = {
						transfer_state = PREV
						add_state_core = PREV
					}
				}
				every_state = {
					limit = {
						OR = {
							is_claimed_by = ITA
							is_core_of = SRD
							is_core_of = SIC
							is_core_of = PAP
						}
					}
					ITA = {
						add_state_claim = PREV
					}
					SRI = {
						add_state_claim = PREV
					}
				}
				ETH = {
				    transfer_state = 550	
				}
				ROI = {
				    transfer_units_fraction= {
						target = SRI
						size = 0.35
						keep_unit_leaders_trigger = {
					        always = yes
					    }
				    }
					transfer_units_fraction= {
						target = SIC
						size = 0.36
				    }
					transfer_units_fraction= {
						target = SRD
						size = 0.2
				    }
					transfer_units_fraction= {
						target = PAP
						size = 0.07
				    }
				    every_state = {
						teleport_armies = {
							to_state_array = owned_controlled_states
						}
					}					
				}	
				FRA = { add_to_faction = SRD }
			}
			if = {
				limit = {
					has_game_rule = {
						rule = rule_russian_flag
						option = HISTORICAL_RUSSIAN_FLAG
					}
				}
				RUS = { set_cosmetic_tag = RUS_historical_flag } 
			}		
            if = {
				limit = {
					has_game_rule = {
						rule = rule_russian_flag
						option = IMPERIAL_RUSSIAN_FLAG
					}
				}
				RUS = { set_cosmetic_tag = RUS_absolutism } 
			}			
		}		
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					original_tag = PAR
					FROM = { original_tag = BRA }
					BOL = {	has_war = no exists = yes owns_state = 487 }	
                    PAR = {	owns_state = 688 }						
				}
	            BOL = { transfer_state = 688 }			
			}
			if = {
				limit = {
					original_tag = QIN 
					FROM = { original_tag = CHI } 
					NOT = {has_country_flag = tibet_released}
				}
				every_state = {
					limit = { 
					    is_core_of = TIB
						OR = {
						    is_owned_by = QIN	
							is_owned_by = CHI
						}	
					}
                    TIB = {transfer_state = PREV}
				}
				set_country_flag = tibet_released
				if = {
					limit = { TIB = { OR = { is_subject_of = QIN is_subject_of = CHI }}}
					end_puppet = TIB
			    }
			}
			if = {
				limit = {
					tag = LTR
					FROM = { original_tag = GER }
					LTR = {
						OR = {
					        has_country_flag = LAT_iskolata
						    has_cosmetic_tag = LAT_iskolata
						}
					}
					RUS = {has_war_with = GER}              				
				}
				LTR = {
				    clr_country_flag = LAT_iskolata	
					drop_cosmetic_tag = yes
					retire_ideology_leader = communism
					set_politics = {
						ruling_party = democratic
						elections_allowed = yes
					}
					set_rule = {
				       can_join_factions = yes
				    }
					set_popularities = {
						democratic = 50
						neutrality = 30
						fascism = 0
						communism = 20
					}
				}
				every_state = {
					limit = {
						is_owned_by = LTR
					}
					RUS = {
						set_state_owner = PREV
               		}
					GER = {						
                        set_state_controller = PREV	                   
                    }
				}			
			}
		}
	}
	on_civil_war_end = {
		effect = {
		    if = {
				limit = {
					original_tag = ECU	
				}
                drop_cosmetic_tag = yes
				set_capital = 305
				if = {
					limit = {
						has_government = neutrality
					}
					set_politics = {
						ruling_party = neutrality
						elections_allowed = yes
					}
				}
			}
		}	
	}
	on_join_faction = {
		effect = {
			if = {
				limit = {
					original_tag = BEL
					has_war = no
					NOT = {
						OR = {
							is_in_faction_with = ENG
							ENG = {
								has_completed_focus = ENG_Pax_Britannica
							}
						}
					}
				}
				ENG = { country_event = ww1_england.165 }
			}
		}
	}		
}
